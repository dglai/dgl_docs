
<!DOCTYPE html>

<html class="writer-html5" data-content_root="../../" lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>dgl.function — DGL 2.5 documentation</title>
<link href="../../_static/pygments.css?v=80d5e7a1" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/theme.css?v=7ab3649f" rel="stylesheet" type="text/css"/>
<link href="../../_static/graphviz.css?v=fd3f3429" rel="stylesheet" type="text/css"/>
<link href="../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../../_static/sg_gallery.css?v=d2d258e8" rel="stylesheet" type="text/css"/>
<link href="../../_static/sg_gallery-binder.css?v=f4aeca0c" rel="stylesheet" type="text/css"/>
<link href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" rel="stylesheet" type="text/css"/>
<link href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/custom.css?v=0bf289b5" rel="stylesheet" type="text/css"/>
<script src="../../_static/jquery.js?v=5d32c60e"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
<script src="../../_static/documentation_options.js?v=38d273f4"></script>
<script src="../../_static/doctools.js?v=9a2dae69"></script>
<script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../../_static/copybutton.js?v=ccdb6887"></script>
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
<script src="../../_static/js/theme.js"></script>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../../generated/dgl.function.copy_u.html" rel="next" title="dgl.function.copy_u"/>
<link href="../../generated/dgl.distributed.dgl_partition_to_graphbolt.html" rel="prev" title="dgl.distributed.dgl_partition_to_graphbolt"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../../index.html">
            DGL
          </a>
<div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Install and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/blitz/index.html">A Blitz Introduction to DGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Materials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../stochastic_training/index.html">🆕 Stochastic Training of GNNs with GraphBolt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide_cn/index.html">用户指南【包含过时信息】</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide_ko/index.html">사용자 가이드[시대에 뒤쳐진]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graphtransformer/index.html">🆕 Tutorial: Graph Transformer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/sparse/index.html">Tutorials: dgl.sparse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/cpu/index.html">Training on CPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/multi/index.html">Training on Multiple GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/dist/index.html">Distributed training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/models/index.html">Paper Study with DGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dgl.html">dgl</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.data.html">dgl.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.dataloading.html">dgl.dataloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.DGLGraph.html">dgl.DGLGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.distributed.html">dgl.distributed</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">dgl.function</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dgl-built-in-function">DGL Built-in Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="#message-functions">Message functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.copy_u.html">dgl.function.copy_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.copy_e.html">dgl.function.copy_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_add_v.html">dgl.function.u_add_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_sub_v.html">dgl.function.u_sub_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_mul_v.html">dgl.function.u_mul_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_div_v.html">dgl.function.u_div_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_add_e.html">dgl.function.u_add_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_sub_e.html">dgl.function.u_sub_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_mul_e.html">dgl.function.u_mul_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_div_e.html">dgl.function.u_div_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_add_u.html">dgl.function.v_add_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_sub_u.html">dgl.function.v_sub_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_mul_u.html">dgl.function.v_mul_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_div_u.html">dgl.function.v_div_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_add_e.html">dgl.function.v_add_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_sub_e.html">dgl.function.v_sub_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_mul_e.html">dgl.function.v_mul_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_div_e.html">dgl.function.v_div_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_add_u.html">dgl.function.e_add_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_sub_u.html">dgl.function.e_sub_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_mul_u.html">dgl.function.e_mul_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_div_u.html">dgl.function.e_div_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_add_v.html">dgl.function.e_add_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_sub_v.html">dgl.function.e_sub_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_mul_v.html">dgl.function.e_mul_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_div_v.html">dgl.function.e_div_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_dot_v.html">dgl.function.u_dot_v</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.u_dot_e.html">dgl.function.u_dot_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_dot_e.html">dgl.function.v_dot_e</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.v_dot_u.html">dgl.function.v_dot_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_dot_u.html">dgl.function.e_dot_u</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.e_dot_v.html">dgl.function.e_dot_v</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reduce-functions">Reduce functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.sum.html">dgl.function.sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.max.html">dgl.function.max</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.min.html">dgl.function.min</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/dgl.function.mean.html">dgl.function.mean</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dgl.geometry.html">dgl.geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.graphbolt.html">🆕 dgl.graphbolt</a></li>
<li class="toctree-l1"><a class="reference internal" href="nn-pytorch.html">dgl.nn (PyTorch)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nn.functional.html">dgl.nn.functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.ops.html">dgl.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.optim.html">dgl.optim</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.sampling.html">dgl.sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.sparse_v0.html">dgl.sparse</a></li>
<li class="toctree-l1"><a class="reference internal" href="dgl.multiprocessing.html">dgl.multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">dgl.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="udf.html">User-defined Functions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contribute to DGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/ffi.html">DGL Foreign Function Interface (FFI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance.html">Performance Benchmarks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../env_var.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../../index.html">DGL</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../../index.html"></a></li>
<li class="breadcrumb-item active">dgl.function</li>
<li class="wy-breadcrumbs-aside">
<a href="../../_sources/api/python/dgl.function.rst.txt" rel="nofollow"> View page source</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="dgl-function">
<span id="apifunction"></span><h1>dgl.function<a class="headerlink" href="#dgl-function" title="Link to this heading"></a></h1>
<p>This subpackage hosts all the <strong>built-in functions</strong> provided by DGL. Built-in functions
are DGL’s recommended way to express different types of <a class="reference internal" href="../../guide/message.html#guide-message-passing"><span class="std std-ref">Chapter 2: Message Passing</span></a> computation
(i.e., via <a class="reference internal" href="../../generated/dgl.DGLGraph.update_all.html#dgl.DGLGraph.update_all" title="dgl.DGLGraph.update_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">update_all()</span></code></a>) or computing edge-wise features from
node-wise features (i.e., via <a class="reference internal" href="../../generated/dgl.DGLGraph.apply_edges.html#dgl.DGLGraph.apply_edges" title="dgl.DGLGraph.apply_edges"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_edges()</span></code></a>). Built-in functions
describe the node-wise and edge-wise computation in a symbolic way without any
actual computation, so DGL can analyze and map them to efficient low-level kernels.
Here are some examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dgl</span>
<span class="kn">import</span> <span class="nn">dgl.function</span> <span class="k">as</span> <span class="nn">fn</span>
<span class="kn">import</span> <span class="nn">torch</span> <span class="k">as</span> <span class="nn">th</span>
<span class="n">g</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># create a DGLGraph</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># each node has feature size 10</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'w'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_edges</span><span class="p">(),</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># each edge has feature size 1</span>
<span class="c1"># collect features from source nodes and aggregate them in destination nodes</span>
<span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">copy_u</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'m'</span><span class="p">),</span> <span class="n">fn</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">'m'</span><span class="p">,</span> <span class="s1">'h_sum'</span><span class="p">))</span>
<span class="c1"># multiply source node features with edge weights and aggregate them in destination nodes</span>
<span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_mul_e</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="s1">'m'</span><span class="p">),</span> <span class="n">fn</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="s1">'m'</span><span class="p">,</span> <span class="s1">'h_max'</span><span class="p">))</span>
<span class="c1"># compute edge embedding by multiplying source and destination node embeddings</span>
<span class="n">g</span><span class="o">.</span><span class="n">apply_edges</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_mul_v</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'h'</span><span class="p">,</span> <span class="s1">'w_new'</span><span class="p">))</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fn.copy_u</span></code>, <code class="docutils literal notranslate"><span class="pre">fn.u_mul_e</span></code>, <code class="docutils literal notranslate"><span class="pre">fn.u_mul_v</span></code> are built-in message functions, while <code class="docutils literal notranslate"><span class="pre">fn.sum</span></code>
and <code class="docutils literal notranslate"><span class="pre">fn.max</span></code> are built-in reduce functions. DGL’s convention is to use <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">v</span></code>
and <code class="docutils literal notranslate"><span class="pre">e</span></code> to represent source nodes, destination nodes, and edges, respectively.
For example, <code class="docutils literal notranslate"><span class="pre">copy_u</span></code> tells DGL to copy the source node data as the messages;
<code class="docutils literal notranslate"><span class="pre">u_mul_e</span></code> tells DGL to multiply source node features with edge features.</p>
<p>To define a unary message function (e.g. <code class="docutils literal notranslate"><span class="pre">copy_u</span></code>), specify one input feature name and one output
message name. To define a binary message function (e.g. <code class="docutils literal notranslate"><span class="pre">u_mul_e</span></code>), specify
two input feature names and one output message name. During the computation,
the message function will read the data under the given names, perform computation, and return
the output using the output name. For example, the above <code class="docutils literal notranslate"><span class="pre">fn.u_mul_e('h',</span> <span class="pre">'w',</span> <span class="pre">'m')</span></code> is
the same as the following user-defined function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">udf_u_mul_e</span><span class="p">(</span><span class="n">edges</span><span class="p">):</span>
   <span class="k">return</span> <span class="p">{</span><span class="s1">'m'</span> <span class="p">:</span> <span class="n">edges</span><span class="o">.</span><span class="n">src</span><span class="p">[</span><span class="s1">'h'</span><span class="p">]</span> <span class="o">*</span> <span class="n">edges</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">'w'</span><span class="p">]}</span>
</pre></div>
</div>
<p>To define a reduce function, one input message name and one output node feature name
need to be specified. For example, the above <code class="docutils literal notranslate"><span class="pre">fn.max('m',</span> <span class="pre">'h_max')</span></code> is the same as the
following user-defined function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">udf_max</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
   <span class="k">return</span> <span class="p">{</span><span class="s1">'h_max'</span> <span class="p">:</span> <span class="n">th</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">mailbox</span><span class="p">[</span><span class="s1">'m'</span><span class="p">],</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]}</span>
</pre></div>
</div>
<p>All binary message function supports <strong>broadcasting</strong>, a mechanism for extending element-wise
operations to tensor inputs with different shapes. DGL generally follows the standard
broadcasting semantic by <a class="reference external" href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html">NumPy</a>
and <a class="reference external" href="https://pytorch.org/docs/stable/notes/broadcasting.html">PyTorch</a>. Below are some
examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dgl</span>
<span class="kn">import</span> <span class="nn">dgl.function</span> <span class="k">as</span> <span class="nn">fn</span>
<span class="kn">import</span> <span class="nn">torch</span> <span class="k">as</span> <span class="nn">th</span>
<span class="n">g</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># create a DGLGraph</span>

<span class="c1"># case 1</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'w'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_edges</span><span class="p">(),</span> <span class="mi">1</span><span class="p">))</span>
<span class="c1"># OK, valid broadcasting between feature shapes (10,) and (1,)</span>
<span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_mul_e</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="s1">'m'</span><span class="p">),</span> <span class="n">fn</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">'m'</span><span class="p">,</span> <span class="s1">'h_new'</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h_new'</span><span class="p">]</span>  <span class="c1"># shape: (g.num_nodes(), 10)</span>

<span class="c1"># case 2</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'w'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_edges</span><span class="p">(),</span> <span class="mi">10</span><span class="p">))</span>
<span class="c1"># OK, valid broadcasting between feature shapes (5, 10) and (10,)</span>
<span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_mul_e</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="s1">'m'</span><span class="p">),</span> <span class="n">fn</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">'m'</span><span class="p">,</span> <span class="s1">'h_new'</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h_new'</span><span class="p">]</span>  <span class="c1"># shape: (g.num_nodes(), 5, 10)</span>

<span class="c1"># case 3</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'w'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_edges</span><span class="p">(),</span> <span class="mi">5</span><span class="p">))</span>
<span class="c1"># NOT OK, invalid broadcasting between feature shapes (5, 10) and (5,)</span>
<span class="c1"># shapes are aligned from right</span>
<span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_mul_e</span><span class="p">(</span><span class="s1">'h'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="s1">'m'</span><span class="p">),</span> <span class="n">fn</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">'m'</span><span class="p">,</span> <span class="s1">'h_new'</span><span class="p">))</span>

<span class="c1"># case 3</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h1'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h2'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="c1"># OK, valid broadcasting between feature shapes (1, 10) and (5, 1)</span>
<span class="n">g</span><span class="o">.</span><span class="n">apply_edges</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_add_v</span><span class="p">(</span><span class="s1">'h1'</span><span class="p">,</span> <span class="s1">'h2'</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">))</span>  <span class="c1"># apply_edges also supports broadcasting</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'x'</span><span class="p">]</span>  <span class="c1"># shape: (g.num_edges(), 5, 10)</span>

<span class="c1"># case 4</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h1'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s1">'h2'</span><span class="p">]</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="n">g</span><span class="o">.</span><span class="n">num_nodes</span><span class="p">(),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
<span class="c1"># OK, u_dot_v supports broadcasting but requires the last dimension to match</span>
<span class="n">g</span><span class="o">.</span><span class="n">apply_edges</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">u_dot_v</span><span class="p">(</span><span class="s1">'h1'</span><span class="p">,</span> <span class="s1">'h2'</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">))</span>
<span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s1">'x'</span><span class="p">]</span>  <span class="c1"># shape: (g.num_edges(), 5, 10, 1)</span>
</pre></div>
</div>
<section id="dgl-built-in-function">
<span id="api-built-in"></span><h2>DGL Built-in Function<a class="headerlink" href="#dgl-built-in-function" title="Link to this heading"></a></h2>
<p>Here is a cheatsheet of all the DGL built-in functions.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Functions</p></th>
<th class="head"><p>Memo</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>Unary message function</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">copy_u</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">copy_e</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="6"><p>Binary message function</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">u_add_v</span></code>, <code class="docutils literal notranslate"><span class="pre">u_sub_v</span></code>, <code class="docutils literal notranslate"><span class="pre">u_mul_v</span></code>, <code class="docutils literal notranslate"><span class="pre">u_div_v</span></code>, <code class="docutils literal notranslate"><span class="pre">u_dot_v</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">u_add_e</span></code>, <code class="docutils literal notranslate"><span class="pre">u_sub_e</span></code>, <code class="docutils literal notranslate"><span class="pre">u_mul_e</span></code>, <code class="docutils literal notranslate"><span class="pre">u_div_e</span></code>, <code class="docutils literal notranslate"><span class="pre">u_dot_e</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">v_add_u</span></code>, <code class="docutils literal notranslate"><span class="pre">v_sub_u</span></code>, <code class="docutils literal notranslate"><span class="pre">v_mul_u</span></code>, <code class="docutils literal notranslate"><span class="pre">v_div_u</span></code>, <code class="docutils literal notranslate"><span class="pre">v_dot_u</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v_add_e</span></code>, <code class="docutils literal notranslate"><span class="pre">v_sub_e</span></code>, <code class="docutils literal notranslate"><span class="pre">v_mul_e</span></code>, <code class="docutils literal notranslate"><span class="pre">v_div_e</span></code>, <code class="docutils literal notranslate"><span class="pre">v_dot_e</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">e_add_u</span></code>, <code class="docutils literal notranslate"><span class="pre">e_sub_u</span></code>, <code class="docutils literal notranslate"><span class="pre">e_mul_u</span></code>, <code class="docutils literal notranslate"><span class="pre">e_div_u</span></code>, <code class="docutils literal notranslate"><span class="pre">e_dot_u</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">e_add_v</span></code>, <code class="docutils literal notranslate"><span class="pre">e_sub_v</span></code>, <code class="docutils literal notranslate"><span class="pre">e_mul_v</span></code>, <code class="docutils literal notranslate"><span class="pre">e_div_v</span></code>, <code class="docutils literal notranslate"><span class="pre">e_dot_v</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>Reduce function</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sum</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mean</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="message-functions">
<h2>Message functions<a class="headerlink" href="#message-functions" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.copy_u.html#dgl.function.copy_u" title="dgl.function.copy_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_u</span></code></a>(u, out)</p></td>
<td><p>Builtin message function that computes message using source node feature.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.copy_e.html#dgl.function.copy_e" title="dgl.function.copy_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_e</span></code></a>(e, out)</p></td>
<td><p>Builtin message function that computes message using edge feature.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.u_add_v.html#dgl.function.u_add_v" title="dgl.function.u_add_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_add_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of u and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.u_sub_v.html#dgl.function.u_sub_v" title="dgl.function.u_sub_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_sub_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of u and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.u_mul_v.html#dgl.function.u_mul_v" title="dgl.function.u_mul_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_mul_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of u and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.u_div_v.html#dgl.function.u_div_v" title="dgl.function.u_div_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_div_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of u and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.u_add_e.html#dgl.function.u_add_e" title="dgl.function.u_add_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_add_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of u and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.u_sub_e.html#dgl.function.u_sub_e" title="dgl.function.u_sub_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_sub_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of u and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.u_mul_e.html#dgl.function.u_mul_e" title="dgl.function.u_mul_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_mul_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of u and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.u_div_e.html#dgl.function.u_div_e" title="dgl.function.u_div_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_div_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of u and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.v_add_u.html#dgl.function.v_add_u" title="dgl.function.v_add_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_add_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of v and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.v_sub_u.html#dgl.function.v_sub_u" title="dgl.function.v_sub_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_sub_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of v and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.v_mul_u.html#dgl.function.v_mul_u" title="dgl.function.v_mul_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_mul_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of v and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.v_div_u.html#dgl.function.v_div_u" title="dgl.function.v_div_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_div_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of v and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.v_add_e.html#dgl.function.v_add_e" title="dgl.function.v_add_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_add_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of v and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.v_sub_e.html#dgl.function.v_sub_e" title="dgl.function.v_sub_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_sub_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of v and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.v_mul_e.html#dgl.function.v_mul_e" title="dgl.function.v_mul_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_mul_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of v and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.v_div_e.html#dgl.function.v_div_e" title="dgl.function.v_div_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_div_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of v and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.e_add_u.html#dgl.function.e_add_u" title="dgl.function.e_add_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_add_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of e and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.e_sub_u.html#dgl.function.e_sub_u" title="dgl.function.e_sub_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_sub_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of e and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.e_mul_u.html#dgl.function.e_mul_u" title="dgl.function.e_mul_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_mul_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of e and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.e_div_u.html#dgl.function.e_div_u" title="dgl.function.e_div_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_div_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of e and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.e_add_v.html#dgl.function.e_add_v" title="dgl.function.e_add_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_add_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise add between features of e and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.e_sub_v.html#dgl.function.e_sub_v" title="dgl.function.e_sub_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_sub_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise sub between features of e and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.e_mul_v.html#dgl.function.e_mul_v" title="dgl.function.e_mul_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_mul_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise mul between features of e and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.e_div_v.html#dgl.function.e_div_v" title="dgl.function.e_div_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_div_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise div between features of e and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.u_dot_v.html#dgl.function.u_dot_v" title="dgl.function.u_dot_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_dot_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of u and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.u_dot_e.html#dgl.function.u_dot_e" title="dgl.function.u_dot_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">u_dot_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of u and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.v_dot_e.html#dgl.function.v_dot_e" title="dgl.function.v_dot_e"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_dot_e</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of v and e if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.v_dot_u.html#dgl.function.v_dot_u" title="dgl.function.v_dot_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">v_dot_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of v and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.e_dot_u.html#dgl.function.e_dot_u" title="dgl.function.e_dot_u"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_dot_u</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of e and u if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.e_dot_v.html#dgl.function.e_dot_v" title="dgl.function.e_dot_v"><code class="xref py py-obj docutils literal notranslate"><span class="pre">e_dot_v</span></code></a>(lhs_field, rhs_field, out)</p></td>
<td><p>Builtin message function that computes a message on an edge by performing element-wise dot between features of e and v if the features have the same shape; otherwise, it first broadcasts the features to a new shape and performs the element-wise operation.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reduce-functions">
<h2>Reduce functions<a class="headerlink" href="#reduce-functions" title="Link to this heading"></a></h2>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.sum.html#dgl.function.sum" title="dgl.function.sum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sum</span></code></a>(msg, out)</p></td>
<td><p>Builtin reduce function that aggregates messages by sum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.max.html#dgl.function.max" title="dgl.function.max"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max</span></code></a>(msg, out)</p></td>
<td><p>Builtin reduce function that aggregates messages by max.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../generated/dgl.function.min.html#dgl.function.min" title="dgl.function.min"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min</span></code></a>(msg, out)</p></td>
<td><p>Builtin reduce function that aggregates messages by min.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../generated/dgl.function.mean.html#dgl.function.mean" title="dgl.function.mean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean</span></code></a>(msg, out)</p></td>
<td><p>Builtin reduce function that aggregates messages by mean.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="../../generated/dgl.distributed.dgl_partition_to_graphbolt.html" rel="prev" title="dgl.distributed.dgl_partition_to_graphbolt"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="../../generated/dgl.function.copy_u.html" rel="next" title="dgl.function.copy_u">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2018, DGL Team.</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" data-toggle="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span class="fa fa-book"> Read the Docs</span>
<span id="version-placeholder">v: latest</span>
<span class="fa fa-caret-down"></span>
</span>
<div class="rst-other-versions">
<dl>
<dt>Versions</dt>
<div id="version-list">
</div>
</dl>
<dl>
<dt>Downloads</dt>
</dl>
<dl>
<dt>On Read the Docs</dt>
<dd><a href="//doc-build.dgl.ai/projects/dgl/?fromdocs=dgl">Project Home</a></dd>
<dd><a href="//doc-build.dgl.ai/builds/dgl/?fromdocs=dgl">Builds</a></dd>
</dl>
</div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        fetch('/dgl_docs/branches.json')
            .then(response => response.json())
            .then(data => {
                var versionListDiv = document.getElementById('version-list');
                data.branches.forEach(function(branch) {
                    var dd = document.createElement('dd');
                    var a = document.createElement('a');
                    a.href = branch.url;
                    a.textContent = branch.name;
                    dd.appendChild(a);
                    versionListDiv.appendChild(dd);
                });
            })
            .catch(error => console.error('Error loading branches:', error));
    });
    document.addEventListener("DOMContentLoaded", function() {
        // 获取当前路径
        var path = window.location.pathname;
        var versionPlaceholder = document.getElementById('version-placeholder');

        
        if (path.includes('/en/')) {
            
            var parts = path.split('/en/');
            if (parts[1]) {
                var folders = parts[1].split('/');
                if (folders.length > 0 && folders[0]) {
                    versionPlaceholder.textContent = 'v: ' + folders[0];
                } else {
                    versionPlaceholder.textContent = 'v: latest';
                }
            } else {
                versionPlaceholder.textContent = 'v: latest';
            }
        } else {
            versionPlaceholder.textContent = 'v: latest';
        }
    });
</script>

<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>